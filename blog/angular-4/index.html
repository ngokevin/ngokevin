<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhml"
      xmlns:fb="http://ogp.me/ns/fb#"
      xml:lang="en" lang="en">

  <head>
    <title>ngokevin | ng-okevin's Angular ch.4 - Templates</title>
    <link rel="stylesheet" type="text/css" href="/css/bundle.css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700' rel='stylesheet' type='text/css'>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico?v=5"/>
    <meta name="viewport" content="width=device-width">
    
  <link rel="stylesheet" type="text/css" href="/css/page.css" />
  
    <meta property="og:image" content="http://i.imgur.com/VJBdacX.jpg"/>
  
  <meta property="og:description" content="Angular templates are an enhanced specification of HTML that, along with information from the model, becomes the rendered view that the user sees in the browser. Recall that the view, in the MVC pattern, generates the output representation with assistance from the model. The templates were designed, through the use of directives, to be more declarative for specifying UI. They are the standard, static DOM sprinkled with various Angular elements that add behavior to make the view more dynamic and more closely binded with the model. Angular seasons several different types of spices on top of standard HTML, expressions that are evaluated JS-like code snippets placed in bindings. directives that augment existing DOM elements or represent a reusable component. filters that format or prettify data for display. form controls that allow the user to input and allow the application to validate data. Angular Expressions Angular expressions are like inline JS snippets in the template, though, following MVC, they are purposely limited in power. They are often placed in bindings in the form of {{ expression }} or in quotes for some directives. In previous chapters, we have already been using expressions to evaluate properties against scopes and to specify event handlers. They can also evaluate simple mathematical and logical expressions. Example expressions might be 1 + 1 * 42 someScopeAttr someScopeAttr || someOtherScopeAttr someScopeMethod() Expressions can also be separated by semicolons. A case where this would be useful would be within the ngInit directive, where we could initialize multiple properties on the scope. Angular Expressions vs. Javascript Expressions Angular expressions are not simply eval()ed JS expressions. Angular expressions are like a subset of JS expressions. There are several notable distinctions between the two. Angular evaluates attributes against the scope, whereas JS would evaluate against the global window. resolves errors and exceptions to undefined or null, whereas JS would throw an exception. contains no control flow constructs such as conditionals or loops. Example In An NBA Poem, we will write a poem involving some basketball memes to demonstrate Angular expressions. &lt;body ng-init=&#34;theDeludedOne = &#39;monta&#39;; lebronRings = 0; bromance = true;&#34;&gt; Not {{ lebronRings + 1 }}. Not {{ lebronRings + 2 }}. Not {{ lebronRings + 3 }}. Because {{ theDeludedOne }} have it all. {{ chris || &#39;Cliff&#39; }} and {{ cliff || &#39;Chris&#39; }} Paul, hoping for the championship. While {{ bromance &amp;&amp; &#39;Parsons&#39; || &#39;Basketball&#39; }} and Lin, a most delicate relationship. With the scope property lebronRings initialized to &#34;0&#34;, we can perform simple addition such as in {{ lebronRings + 1 }}} to yield &#34;1&#34;. Or we can simply output properties, as is, as a string. Such is the case where {{ theDeludedOne }} evaluates to &#34;monta&#34;. Because expressions are forgiving, even though chris has not been defined, {{ chris || &#39;Cliff&#39; }} still evaluates to &#34;Cliff&#34;. Attempting to evaluate this expression in JS would raise a &#34;ReferenceError: chris is not defined&#34;, on the other hand. The expression {{ chris || &#39;Cliff&#39; }} also demonstrates the use of boolean logic to accomplish a simple conditional without any control flow constructs. It evaluates chris if it exists, else it evalutes to &#34;Cliff&#34;. Ternary Operations in Expressions Often in templates, an if then else kind of evaluation is useful. Angular expressions do not contain any control flow constructs, however. Traditionally in JS, we could use an if then else flow. if (a) { return b; } else { return c; } JS contains the ternary operator, to make it more succinct return a ? b : c; Angular expressions do not contain the ternary operator. Equivalently, we can use boolean logic to achieve the same control. In An NBA Poem, the expression {{ bromance &amp;&amp; &#39;Parsons&#39; || &#39;Basketball }} demonstrates an if then else evaluation. If bromance is not falsy, then the expression evaluates to &#34;Parsons&#34;, else it evaluates to &#34;Basketball&#34;. Built-in Directives Directives teach HTML new tricks and allows us to forge reusable widgets. Already, we have been using basic built-in Angular directives such as ngApp, ngModel, ngController, and ngClick. Built-in directives can declared in all of several different styles, via element: &lt;directive&gt;&lt;/directive&gt; attribute: &lt;div directive=&#34;expression&#34;&gt;&lt;/div&gt; class: &lt;div class=&#34;directive = &#39;expression&#34;&gt;&lt;/div&gt; comment: &lt;!--directive: expression--&gt; We will delve deeper into directives, and how to craft custom directives, in Directives, Teaching an Old HTML New Tricks. For now, we will cover some useful directives that have not yet been covered. The official Angular documentation contains an API reference detailing all of the directives, totaling over 50 at time of writing. ngClass ngClass allows us to dynamically set CSS classes. We pass an expression containing class names that are either space-delimited, in an array, or in a map that maps the classes to boolean values. Often, we use scope properties to conditionally determine whether a class is to be set. Note classes set with ngClass are appended to the classes normally set via the HTML class attribute. One way to register the directive is to pass expression into ng-class. The official Angular docmentation denotes expressions in brackets when describing directive use, {expression}, but note that it is for annotation purposes. Expressions should not actually be surrounded in brackets, unless we are passing a map which are coincidentally surrounded by brackets. &lt;ANY ng-class=&#34;{expression}&#34;&gt; ... &lt;/ANY&gt; Example In Transformer, we will create checkboxes that will set classes to transform an HTML element to demonstrate ngClass. &lt;div class=&#34;box&#34; ng-class=&#34;{&#39;border&#39;: border, &#39;circle&#39;: circle, &#39;red&#39;: red, &#39;rotate&#39;: rotate, &#39;scale&#39;: scale}&#34;&gt;&lt;/div&gt; &lt;label for=&#34;rotate&#34;&gt; &lt;input id=&#34;rotate&#34; type=&#34;checkbox&#34; ng-model=&#34;rotate&#34;&gt;Rotate &lt;/label&gt; We pass a mapping of classes to expressions. If the expressions are truthy, then the class is set. For example, enabling the #rotate input will set rotate to true. The &#34;rotate&#34; class will then be added to the div on top of its &#34;box&#34; class. Setting Classes on Specific Values We can also conditionally set classes based on the specific value of a scope property with ngClass. In Transfomer, pretend rotate&#39;s possible values are &#34;rotateSmall&#34;, &#34;rotateMed&#34;, and &#34;rotateLarge&#34;. For each, we wish to set different classes. &lt;div class=&#34;box&#34; ng-class=&#34;{rotateSmall: &#39;rotateSmall red&#39;, rotateMed: &#39;rotateMed green&#39; rotateLarge: &#39;rotateLarge blue&#39;}[rotate]&#34;&gt;&lt;/div&gt; Instead mapping from class names to boolean values, we can map from property values to class names. We use the scope property to fish the desired classes. For example, if rotate is &#34;rotateSmall&#34;, then the div will have the classes &#34;rotateSmall&#34; and &#34;red&#34;. ngRepeat ngRepeat is like a loop in the template. We can loop over an given array or map and generate a chunk of template on each iteration. Each instantiated template is given its own scope, and each instantiated template is given access to temporary variables in context of the loop (e.g. $index, $first, $last). Often, ngRepeat is used to generate some sort of list view. &lt;ANY ng-repeat=&#34;{repeatExpression}&#34;&gt; ... &lt;/ANY&gt; Example In Gym Leaders, we will present a list of Pokemon gym leaders and their respective Pokemon to demonstrate ngRepeat. $scope.gymLeaders = [ {name: &#39;Brock&#39;, pokemon: [&#39;Geodude&#39;, &#39;Onyx&#39;]}, {name: &#39;Misty&#39;, pokemon: [&#39;Staryu&#39;, &#39;Starmie&#39;]}, {name: &#39;Lt. Surge&#39;, pokemon: [&#39;Voltorb&#39;, &#39;Magnemite&#39;, &#39;Raichu&#39;]}, // ... ]; The gymLeaders data structure is an array of objects which we iterate through in the template. Note if gymLeaders is changed, Angular will $apply the changes, updating the template. &lt;div ng-repeat=&#34;gymLeader in gymLeaders&#34;&gt; &lt;h2&gt;{{ gymLeader.name }}&lt;/h2&gt; &lt;span class=&#34;ngRepeat: pokemon in gymLeader.pokemon&#34;&gt; {{ pokemon }} &lt;/span&gt; &lt;/div&gt; We iterate over gymLeaders. In a nested loop, we also iterate through their pokemon. Each iteration copies the element with the ngRepeat directive along with whatever is within. Template generated by an iteration of ng-repeat &lt;div ng-repeat=&#34;gymLeader in gymLeaders&#34; class=&#34;ng-scope&#34;&gt; &lt;h2 class=&#34;ng-binding&#34;&gt;Brock&lt;/h2&gt; &lt;!-- ngRepeat: pokemon in gymLeader.pokemon --&gt; &lt;span class=&#34;ngRepeat: pokemon in gymLeader.pokemon ng-scope ng-binding&#34;&gt; Geodude &lt;/span&gt; &lt;span class=&#34;ngRepeat: pokemon in gymLeader.pokemon ng-scope ng-binding&#34;&gt; Onyx &lt;/span&gt; &lt;/div&gt; ngRepeat can also iterate over JS objects, unpacking the keys and values. We could have defined gymLeaders using names of the gym leaders as keys. $scope.gymLeaders = { &#39;Brock&#39;: [&#39;Geodude&#39;, &#39;Onyx&#39;], &#39;Misty&#39;: [&#39;Staryu&#39;, &#39;Starmie&#39;], &#39;Lt. Surge&#39;: [&#39;Voltorb&#39;, &#39;Magnemite&#39;, &#39;Raichu&#39;], // ... }; We could then iterate with ngRepeat, although the order in which we defined the gym leaders would not be preserved. &lt;div ng-repeat=&#34;(gymLeader, pokemon) in gymLeaders&#34;&gt; // ... ngInclude ngInclude allows us to fetch, compile, and embed an external HTML fragment or template. This inherits and creates a new scope. Often, we use ngInclude to include HTML that we have abstracted into a partial, a separate HTML template, for encapsulation or reusability. &lt;ANY ng-include=&#34;{srcString}&#34;&gt; ... &lt;/ANY&gt; Since we are often including our own partial, srcString is usually a relative path to the partial file. Note cross-origin resource sharing (CORS) restrictions still apply to included resources so the partial must be within the same domain. Example In Gym Leaders, we will recycle our previous example and create a small partial to use within ng-repeat to demonstrate ng-include. &lt;h2&gt;{{ gymLeader.name }}&lt;/h2&gt; &lt;span class=&#34;ngRepeat: pokemon in gymLeader.pokemon&#34;&gt; {{ pokemon }} &lt;/span&gt; We abstract the HTML from within our earlier ngRepeat loop into its own partial. When we include the partial, it inherit the scope so the data bindings will still evaluate properly. &lt;div ng-repeat=&#34;gymLeader in gymLeaders&#34;&gt; &lt;div ng-include=&#34;&#39;partials/gym_leader.html&#39;&#34;&gt;&lt;/div&gt; &lt;/div&gt; Then we simply include our partial. The compiled HTML is identical to had we not used a partial. Though now the main HTML file is somewhat cleaner, and we could reuse our partial in other parts of the app if needed. Filters Angular filters format or prettify data for display to the user. They can take colon-delimited arguments and can also be chained. {{ expression | firstFilter | secondFilter:arg1:arg2 }} Angular comes with a handful of handy filters built-in, all of which can be found in the official Angular API reference. Example In Hot Chat Phone Bill, we will create a fake phone bill to demonstrate some built-in Angular filters. &lt;dt&gt;ID&lt;/dt&gt; &lt;dd&gt;{{ &#39;oskpmknz&#39; | uppercase }}&lt;/dd&gt; &lt;dt&gt;Date&lt;/dt&gt; &lt;dd&gt;{{ billDate | date:&#39;medium&#39; }}&lt;/dd&gt; &lt;dt&gt;Charge Amount&lt;/dt&gt; &lt;dd&gt;{{ 199.98 | currency }}&lt;/dd&gt; These filters highlight basic use. The uppercase filter simply transforms a string to uppercase representation, no strings attached. Filters can also take argments. The date demonstrates such, taking a string format describing how we want the date to be represented. &#34;medium&#34; is a built-in choice by Angular. &lt;thead&gt; &lt;tr&gt; &lt;th ng-click=&#34;orderby = &#39;operator&#39;; reverse = false&#34;&gt;&lt;a&gt;Operator&lt;/a&gt;&lt;/th&gt; &lt;th ng-click=&#34;orderby = &#39;minutes&#39;; reverse = true&#34;&gt;&lt;a&gt;Minutes&lt;/a&gt;&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody ng-init=&#34;orderby = &#39;minutes&#39;; reverse = true&#34;&gt; &lt;tr ng-repeat=&#34;call in calls | orderBy:(orderby):reverse&#34;&gt; &lt;td&gt;{{ call.operator }}&lt;/td&gt; &lt;td&gt;{{ call.minutes }}&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; Some filters operate on arrays. orderBy sorts an array and can take in multiple arguments. These arguments include what object properties to order by and whether to sort forwards or backwards. We sort the call transactions either by the name of the operator or the minutes of the call. To mix it up, we make it a bit more dynamic, by changing the sort property and order upon clicking respective table headers. Creating Custom Filters Use the Angular module&#39;s filter factory method to create and register a custom filter. The method should take the name of the filter as the first argument and the filter function as the second argument. To take arguments, the parameter function should return the filter function. The filter function should take the input as the first argument. Additional arguments can also be passed to the function. angular.module(&#39;myModule&#39;, []).filter(&#39;myFilter&#39;, function() { return function(input, arg) { // Do something with input. return input; } }); The filter can now be called in the template. Sorry, no hot chat examples for custom filters. Up Next So now we got all this ability to manipulate and display data. Let&#39;s take a quick step into ch.5 Forms, in which Angular provides facilities for form validation and styling."/>

  </head>

  <body>
    <div id="wrap" class="c">
      <header>
        <div class="logos">
          <h1 id="logo">
            <a href='/'>ngo<strong>kevin</strong></a>
            <span class="social">
              <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
              <a href="http://twitter.com/andgokevin"><i class="fa fa-twitter-square"></i></a>
              <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
              <a type="application/rss+xml" href="/rss"><i class="fa fa-rss-square"></i></a>
            </span>
          </h1>
          <span id="sublogo">virtual reality developer at mozilla</span>
          <ul class="blog-tags">
            
              <li>
                <a href="/blog/tags/code/"
                   >
                  Code</a>
              </li>
            
              <li>
                <a href="/blog/tags/life/"
                   >
                  Life</a>
              </li>
            
              <li>
                <a href="/blog/tags/photography/"
                   >
                  Shoot</a>
              </li>
            
              <li>
                <a href="/blog/tags/poker/"
                   >
                  Poker</a>
              </li>
            
          </ul>
        </div>

        <nav>
          
            <a href="/about/">
              <span>
                About</span>
            </a>
          
            <a href="/">
              <span>
                Write</span>
            </a>
          
            <a href="/photography/">
              <span>
                Shoot</span>
            </a>
          
        </nav>
      </header>

      <div class="main">
        <div class="header-group">
  <div class="blog">
    <h1>ng-okevin's Angular ch.4 - Templates</h1>

    <p class="metadata">
      
        Friday April 04, 2014
      
    </p>
  </div>

  <div id="top-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
</div>

        <div class="base-image">
          
            <div class="page_pic ">
              <img class="captioned" src="http://i.imgur.com/VJBdacX.jpg">
              <div class="page-caption"><span>You don't need that HTML Spec Instruction Manual, be a master builder with Angular templates!</span></div>
            </div>
          
        </div>

        
  <div class="page c">
    <p>Angular <strong>templates</strong> are an enhanced specification of HTML that, along with
information from the model, becomes the rendered view that the user sees in the
browser. Recall that the view, in the MVC pattern, generates the output
representation with assistance from the model.</p>
<p>The templates were designed, through the use of directives, to be more
declarative for specifying UI. They are the standard, static DOM sprinkled with
various Angular elements that add behavior to make the view more dynamic and
more closely binded with the model.</p>
<p>Angular seasons several different types of spices on top of standard HTML,</p>
<ul>
<li><strong>expressions</strong> that are evaluated JS-like code snippets placed in
  bindings.</li>
<li>directives that augment existing DOM elements or represent a reusable
  component.</li>
<li><strong>filters</strong> that format or prettify data for display.</li>
<li>form controls that allow the user to input and allow the application to
  validate data.</li>
</ul>
<h2 id="angular-expressions">Angular Expressions</h2>
<p>Angular expressions are like inline JS snippets in the template,
though, following MVC, they are purposely limited in power. They are often
placed in bindings in the form of <code>{{ expression }}</code> or in quotes for some
directives.</p>
<p>In previous chapters, we have already been using expressions to evaluate
properties against scopes and to specify event handlers. They can also evaluate
simple mathematical and logical expressions. Example expressions might be</p>
<ul>
<li>1 + 1 * 42</li>
<li>someScopeAttr</li>
<li>someScopeAttr || someOtherScopeAttr</li>
<li>someScopeMethod()</li>
</ul>
<p>Expressions can also be separated by semicolons. A case where this would be
useful would be within the <code>ngInit</code> directive, where we could initialize
multiple properties on the scope.</p>
<h3 id="angular-expressions-vs-javascript-expressions">Angular Expressions vs. Javascript Expressions</h3>
<p>Angular expressions are not simply <code>eval()</code>ed JS expressions. Angular
expressions are like a subset of JS expressions. There are several notable
distinctions between the two. Angular</p>
<ul>
<li>evaluates attributes against the scope, whereas JS would evaluate
  against the global <code>window</code>.</li>
<li>resolves errors and exceptions to <code>undefined</code> or <code>null</code>,
  whereas JS would throw an exception.</li>
<li>contains no control flow constructs such as conditionals or loops.</li>
</ul>
<h3 id="example">Example</h3>
<p>In <em>An NBA Poem</em>, we will write a poem involving some basketball memes to
demonstrate Angular expressions.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">body</span> <span class="na">ng-init</span><span class="o">=</span><span class="s">&quot;theDeludedOne = &#39;monta&#39;; lebronRings = 0; bromance = true;&quot;</span><span class="p">&gt;</span>
Not {{ lebronRings + 1 }}. Not {{ lebronRings + 2 }}. Not {{ lebronRings + 3 }}.

Because {{ theDeludedOne }} have it all.

{{ chris || &#39;Cliff&#39; }} and {{ cliff || &#39;Chris&#39; }} Paul, hoping for the championship.

While {{ bromance <span class="err">&amp;&amp;</span> &#39;Parsons&#39; || &#39;Basketball&#39; }} and Lin, a most delicate relationship.
</pre></div>


<p>With the scope property <code>lebronRings</code> initialized to "0", we can perform
simple addition such as in <code>{{ lebronRings + 1 }}}</code> to yield "1".</p>
<p>Or we can simply output properties, as is, as a string. Such is the case where
<code>{{ theDeludedOne }}</code> evaluates to "monta".</p>
<p>Because expressions are forgiving, even though  <code>chris</code> has not been
defined, <code>{{ chris || 'Cliff' }}</code> still evaluates to "Cliff". Attempting to
evaluate this expression in JS would raise a "ReferenceError: chris is not
defined", on the other hand.</p>
<p>The expression <code>{{ chris || 'Cliff' }}</code> also demonstrates the use of
boolean logic to accomplish a simple conditional without any control flow
constructs. It evaluates <code>chris</code> if it exists, else it evalutes to "Cliff".</p>
<h4 id="ternary-operations-in-expressions">Ternary Operations in Expressions</h4>
<p>Often in templates, an <code>if then else</code> kind of evaluation is useful. Angular
expressions do not contain any control flow constructs, however. Traditionally
in JS, we could use an <code>if then else</code> flow.</p>
<div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">c</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>JS contains the ternary operator, to make it more succinct</p>
<div class="highlight"><pre><span class="k">return</span> <span class="nx">a</span> <span class="o">?</span> <span class="nx">b</span> <span class="o">:</span> <span class="nx">c</span><span class="p">;</span>
</pre></div>


<p>Angular expressions do not contain the ternary operator. Equivalently, we can
use boolean logic to achieve the same control. In <em>An NBA Poem</em>, the expression
<code>{{ bromance &amp;&amp; 'Parsons' || 'Basketball }}</code> demonstrates an
<code>if then else</code> evaluation. If <code>bromance</code> is not falsy, then the
expression evaluates to "Parsons", else it evaluates to "Basketball".</p>
<h2 id="built-in-directives">Built-in Directives</h2>
<p>Directives teach HTML new tricks and allows us to forge reusable widgets.
Already, we have been using basic built-in Angular directives such as
<code>ngApp</code>, <code>ngModel</code>, <code>ngController</code>, and <code>ngClick</code>.</p>
<p>Built-in directives can declared in all of several different styles, via</p>
<ul>
<li>element: <code>&lt;directive&gt;&lt;/directive&gt;</code></li>
<li>attribute: <code>&lt;div directive="expression"&gt;&lt;/div&gt;</code></li>
<li>class: <code>&lt;div class="directive = 'expression"&gt;&lt;/div&gt;</code></li>
<li>comment: <code>&lt;!--directive: expression--&gt;</code></li>
</ul>
<p>We will delve deeper into directives, and how to craft custom directives, in
<em>Directives, Teaching an Old HTML New Tricks</em>.</p>
<p>For now, we will cover some useful directives that have not yet been covered.
The official Angular documentation contains an API reference detailing all of
the directives, totaling over 50 at time of writing.</p>
<h3 id="ngclass">ngClass</h3>
<p><code>ngClass</code> allows us to dynamically set CSS classes. We pass an expression
containing class names that are either space-delimited, in an array, or in a
map that maps the classes to boolean values. Often, we use scope properties
to conditionally determine whether a class is to be set.</p>
<p>Note classes set with <code>ngClass</code> are <em>appended</em> to the classes normally set
via the HTML <code>class</code> attribute.</p>
<p>One way to register the directive is to pass <code>expression</code> into
<code>ng-class</code>. The official Angular docmentation denotes expressions in
brackets when describing directive use, <code>{expression}</code>, but note that it is
for annotation purposes. Expressions should <strong>not</strong> actually be surrounded in
brackets, unless we are passing a map which are coincidentally surrounded by
brackets.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">ANY</span> <span class="na">ng-class</span><span class="o">=</span><span class="s">&quot;{expression}&quot;</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">ANY</span><span class="p">&gt;</span>
</pre></div>


<h4 id="example_1">Example</h4>
<p>In <em>Transformer</em>, we will create checkboxes that will set classes to transform
an HTML element to demonstrate <code>ngClass</code>.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;box&quot;</span> <span class="na">ng-class</span><span class="o">=</span><span class="s">&quot;{&#39;border&#39;: border, &#39;circle&#39;: circle, &#39;red&#39;: red,</span>
<span class="s">                            &#39;rotate&#39;: rotate, &#39;scale&#39;: scale}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;rotate&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;rotate&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">ng-model</span><span class="o">=</span><span class="s">&quot;rotate&quot;</span><span class="p">&gt;</span>Rotate
<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
</pre></div>


<p>We pass a mapping of classes to expressions. If the expressions are truthy,
then the class is set. For example, enabling the <code>#rotate</code> input will set
<code>rotate</code> to <em>true</em>. The "rotate" class will then be added to the
<code>div</code> on top of its "box" class.</p>
<iframe src="/files/ng-book/examples/transformer/index.html"></iframe>

<h4 id="setting-classes-on-specific-values">Setting Classes on Specific Values</h4>
<p>We can also conditionally set classes based on the specific value of a scope
property with <code>ngClass</code>. In <em>Transfomer</em>, pretend <code>rotate</code>'s possible
values are "rotateSmall", "rotateMed", and "rotateLarge". For each, we wish to
set different classes.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;box&quot;</span> <span class="na">ng-class</span><span class="o">=</span><span class="s">&quot;{rotateSmall: &#39;rotateSmall red&#39;,</span>
<span class="s">                            rotateMed: &#39;rotateMed green&#39;</span>
<span class="s">                            rotateLarge: &#39;rotateLarge blue&#39;}[rotate]&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p>Instead mapping from class names to boolean values, we can map from
property values to class names. We use the scope property to fish the desired
classes. For example, if <code>rotate</code> is "rotateSmall", then the <code>div</code> will
have the classes "rotateSmall" and "red".</p>
<h3 id="ngrepeat">ngRepeat</h3>
<p><code>ngRepeat</code> is like a loop in the template. We can loop over an given array
or map and generate a chunk of template on each iteration. Each instantiated
template is given its own scope, and each instantiated template is given access
to temporary variables in context of the loop (e.g. <code>$index</code>, <code>$first</code>,
<code>$last</code>). Often, <code>ngRepeat</code> is used to generate some sort of list
view.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">ANY</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;{repeatExpression}&quot;</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">ANY</span><span class="p">&gt;</span>
</pre></div>


<h4 id="example_2">Example</h4>
<p>In <em>Gym Leaders</em>, we will present a list of Pokemon gym leaders and their
respective Pokemon to demonstrate <code>ngRepeat</code>.</p>
<div class="highlight"><pre><span class="nx">$scope</span><span class="p">.</span><span class="nx">gymLeaders</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Brock&#39;</span><span class="p">,</span> <span class="nx">pokemon</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Geodude&#39;</span><span class="p">,</span> <span class="s1">&#39;Onyx&#39;</span><span class="p">]},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Misty&#39;</span><span class="p">,</span> <span class="nx">pokemon</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Staryu&#39;</span><span class="p">,</span> <span class="s1">&#39;Starmie&#39;</span><span class="p">]},</span>
    <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Lt. Surge&#39;</span><span class="p">,</span> <span class="nx">pokemon</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Voltorb&#39;</span><span class="p">,</span> <span class="s1">&#39;Magnemite&#39;</span><span class="p">,</span> <span class="s1">&#39;Raichu&#39;</span><span class="p">]},</span>
    <span class="c1">// ...</span>
<span class="p">];</span>
</pre></div>


<p>The <code>gymLeaders</code> data structure is an array of objects which we iterate
through in the template. Note if <code>gymLeaders</code> is changed, Angular will
<code>$apply</code> the changes, updating the template.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;gymLeader in gymLeaders&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ gymLeader.name }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ngRepeat: pokemon in gymLeader.pokemon&quot;</span><span class="p">&gt;</span>
    {{ pokemon }}
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p>We iterate over <code>gymLeaders</code>. In a nested loop, we also iterate through
their <code>pokemon</code>. Each iteration copies the element with the <code>ngRepeat</code>
directive along with whatever is within.</p>
<p><em>Template generated by an iteration of ng-repeat</em></p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;gymLeader in gymLeaders&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ng-scope&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ng-binding&quot;</span><span class="p">&gt;</span>Brock<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- ngRepeat: pokemon in gymLeader.pokemon --&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ngRepeat: pokemon in gymLeader.pokemon ng-scope ng-binding&quot;</span><span class="p">&gt;</span>
    Geodude
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ngRepeat: pokemon in gymLeader.pokemon ng-scope ng-binding&quot;</span><span class="p">&gt;</span>
    Onyx
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p><code>ngRepeat</code> can also iterate over JS objects, unpacking the keys and
values. We could have defined <code>gymLeaders</code> using names of the gym leaders
as keys.</p>
<div class="highlight"><pre><span class="nx">$scope</span><span class="p">.</span><span class="nx">gymLeaders</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Brock&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Geodude&#39;</span><span class="p">,</span> <span class="s1">&#39;Onyx&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Misty&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Staryu&#39;</span><span class="p">,</span> <span class="s1">&#39;Starmie&#39;</span><span class="p">],</span>
    <span class="s1">&#39;Lt. Surge&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Voltorb&#39;</span><span class="p">,</span> <span class="s1">&#39;Magnemite&#39;</span><span class="p">,</span> <span class="s1">&#39;Raichu&#39;</span><span class="p">],</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>


<p>We could then iterate with <code>ngRepeat</code>, although the order in which we
defined the gym leaders would not be preserved.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;(gymLeader, pokemon) in gymLeaders&quot;</span><span class="p">&gt;</span>
    // ...
</pre></div>


<iframe src="/files/ng-book/examples/gymleaders/index.html"></iframe>

<h3 id="nginclude">ngInclude</h3>
<p><code>ngInclude</code> allows us to fetch, compile, and embed an external HTML
fragment or template. This inherits and creates a new scope. Often, we use
<code>ngInclude</code> to include HTML that we have abstracted into a <strong>partial</strong>, a
separate HTML template, for encapsulation or reusability.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">ANY</span> <span class="na">ng-include</span><span class="o">=</span><span class="s">&quot;{srcString}&quot;</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">ANY</span><span class="p">&gt;</span>
</pre></div>


<p>Since we are often including our own partial, <code>srcString</code> is usually a
relative path to the partial file. Note <strong>cross-origin resource sharing</strong>
(CORS) restrictions still apply to included resources so the partial must be
within the same domain.</p>
<h4 id="example_3">Example</h4>
<p>In <em>Gym Leaders</em>, we will recycle our previous example and create a small
partial to use within <code>ng-repeat</code> to demonstrate <code>ng-include</code>.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{{ gymLeader.name }}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ngRepeat: pokemon in gymLeader.pokemon&quot;</span><span class="p">&gt;</span>
  {{ pokemon }}
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</pre></div>


<p>We abstract the HTML from within our earlier <code>ngRepeat</code> loop into its
own partial. When we include the partial, it inherit the scope so the data
bindings will still evaluate properly.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;gymLeader in gymLeaders&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ng-include</span><span class="o">=</span><span class="s">&quot;&#39;partials/gym_leader.html&#39;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>


<p>Then we simply include our partial. The compiled HTML is identical to had we
not used a partial. Though now the main HTML file is somewhat cleaner, and we
could reuse our partial in other parts of the app if needed.</p>
<h2 id="filters">Filters</h2>
<p>Angular filters format or prettify data for display to the user. They can take
colon-delimited arguments and can also be chained.</p>
<div class="highlight"><pre><span class="p">{{</span> <span class="nx">expression</span> <span class="o">|</span> <span class="nx">firstFilter</span> <span class="o">|</span> <span class="nx">secondFilter</span><span class="o">:</span><span class="nx">arg1</span><span class="o">:</span><span class="nx">arg2</span> <span class="p">}}</span>
</pre></div>


<p>Angular comes with a handful of handy filters built-in, all of which can be
found in the official Angular API reference.</p>
<h3 id="example_4">Example</h3>
<p>In <em>Hot Chat Phone Bill</em>, we will create a fake phone bill to demonstrate some
built-in Angular filters.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>ID<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{{ &#39;oskpmknz&#39; | uppercase }}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{{ billDate | date:&#39;medium&#39; }}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Charge Amount<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>{{ 199.98 | currency }}<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
</pre></div>


<p>These filters highlight basic use. The <code>uppercase</code> filter simply transforms
a string to uppercase representation, no strings attached.</p>
<p>Filters can also take argments. The <code>date</code> demonstrates such, taking a
string format describing how we want the date to be represented. "medium" is
a built-in choice by Angular.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">ng-click</span><span class="o">=</span><span class="s">&quot;orderby = &#39;operator&#39;; reverse = false&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span><span class="p">&gt;</span>Operator<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">ng-click</span><span class="o">=</span><span class="s">&quot;orderby = &#39;minutes&#39;; reverse = true&quot;</span><span class="p">&gt;&lt;</span><span class="nt">a</span><span class="p">&gt;</span>Minutes<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">tbody</span> <span class="na">ng-init</span><span class="o">=</span><span class="s">&quot;orderby = &#39;minutes&#39;; reverse = true&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;call in calls | orderBy:(orderby):reverse&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ call.operator }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ call.minutes }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</pre></div>


<p>Some filters operate on arrays. <code>orderBy</code> sorts an array and can take in
multiple arguments. These arguments include what object properties to order by
and whether to sort forwards or backwards.</p>
<p>We sort the call transactions either by the name of the operator or the minutes
of the call. To mix it up, we make it a bit more dynamic, by changing the sort
property and order upon clicking respective table headers.</p>
<iframe src="/files/ng-book/examples/hotchatphonebill/index.html"></iframe>

<h3 id="creating-custom-filters">Creating Custom Filters</h3>
<p>Use the Angular <code>module</code>'s <code>filter</code> factory method to create and
register a custom filter. The method should take the name of the filter as the
first argument and the filter function as the second argument.</p>
<p>To take arguments, the parameter function should return the filter function.
The filter function should take the input as the first argument. Additional
arguments can also be passed to the function.</p>
<div class="highlight"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myModule&#39;</span><span class="p">,</span> <span class="p">[]).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;myFilter&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Do something with input.</span>
        <span class="k">return</span> <span class="nx">input</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<p>The filter can now be called in the template. Sorry, no hot chat examples for
custom filters.</p>
<h2 id="up-next">Up Next</h2>
<p>So now we got all this ability to manipulate and display data. Let's take a
quick step into <a href="/blog/angular-5">ch.5 Forms</a>, in which Angular provides
facilities for form validation and styling.</p>
  </div>

  <p class="end-sect">&sect;</p>
  <div id="bottom-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
   <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'ngokevin'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  <script src="https://cdn.jsdelivr.net/anchorjs/3.0.0/anchor.min.js"></script>
  <script>anchors.add('h2, h3, h4, h5, h6');</script>

      </div>
    </div>

    <div id="footer">
      <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
      <a href="http://twitter.com/ngokevin_"><i class="fa fa-twitter-square"></i></a>
      <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
      <a type="application/rss+xml" href="/rss/index.xml"><i class="fa fa-rss-square"></i></a>
    </div>

     <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29871909-1']);
  _gaq.push(['_trackPageview']);

  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>