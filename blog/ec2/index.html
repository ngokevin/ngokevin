<html>
  <head>
    <title>Kevin Ngo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/css/base.css">
    
     <link rel="stylesheet" href="/css/post.css"> 
    <script src="https://use.fontawesome.com/5b235cd0cb.js"></script>
  <link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>
  <body>
    <div class="post">
  
    <a href="/">&laquo; Kevin Ngo</a>
  

  <h1>Amazon EC2 Instance and Puppet</h1>
  <p>9 Mar 2012</p>

  
    <img src="http://i.imgur.com/TlXG0.png">
  

  <p>I finally took the splurge on an <a href="http://aws.amazon.com" target="_blank" rel="external">AWS</a> micro EC2
(Elastic Cloud Compute) instance. Well, it wasn’t really a splurge since I
created a new Amazon account to qualify for their one-year free usage tier.</p>
<hr>
<p>The meat of the AWS Free Usage Tier (per month):</p>
<ul>
<li>750 hours of <a href="http://aws.amazon.com/ec2" target="_blank" rel="external">EC2</a> Linux Micro Instance Usage (613MB memory) – the
whole month</li>
<li>30GB of <a href="http://aws.amazon.com/ebs" target="_blank" rel="external">Elastic Block Storage</a> – preallocated “mountable” disk space</li>
<li>5GB of <a href="http://aws.amazon.com/ebs" target="_blank" rel="external">S3</a></li>
<li>15GB bandwidth out</li>
</ul>
<p>After the period is over (which I may then create another new account), a Micro
instance is $.020 per hour, and the EBS volumes are $.10 per GB per month. Not
bad at all especially with the recent price drops.
<a href="http://www.linode.com" target="_blank" rel="external">Linode</a> was another option, but they had me playing
Goldilocks; they offered a few fixed options that were either not enough or too
much. Amazon on the flip side is pay-as-you-go (and of course a free year).
Perhaps if I used my instance enough, they’ll forget about charging me like
they did with my Amazon Prime account that has been good and free since
forever.</p>
<p>I found this to be a good chance to practice my Puppet-eering. A month ago, I
started a Git repository for what meant to be my Puppet manifests, but I never
got around to it. Though with some help from <a href="http://github.com/limed" target="_blank" rel="external">limed</a>
and <a href="http://github.com/mozilla/playdoh" target="_blank" rel="external">Playdoh’s</a> Puppet template, I found a
nice structure for my Puppet files and manifests.</p>
<pre><code>puppet-ngokevin/
|-- files
|   |-- etc
|   |   |-- apache2
|   |   |   |-- sites-enabled
|   |   |       |-- ngokevin.conf
|   |   |-- vim
|   |       |-- vimrc
|   |-- home
|       |-- bashrc
|       |-- beetsconfig
|-- manifests
|   |-- classes
|   |   |-- apache2.pp
|   |   |-- apt.pp
|   |   |-- bash.pp
|   |   |-- beets.pp
|   |   |-- git.pp
|   |   |-- init.pp
|   |   |-- ngokevin.pp
|   |   |-- python.pp
|   |   |-- subsonic.pp
|   |   |-- tzdata.pp
|   |   |-- vim.pp
|   |   |-- wok.pp
|   |-- puppet-ngokevin.pp
|-- pip
</code></pre><p>I had puppet-ngokevin.pp act as the main manifest, defining parameters and
specifying the order in which classes are applied. And it’s smooth sailing from
there: bring in configs, install packages, and set up this site. A successful
Puppet apply is like rolling a d20. After that, I just pointed my domain name
towards the public DNS of my instance, and to the Internet it goes. Next, I need
to get a ~30gB EBS volume to store my music for some Subsonic goodness.</p>
<p>I can finally put to rest my home server that’s running under a desk in
Portland. You’ve done well, friend.</p>

</div>


    <div class="social">
      <a href="https://github.com/ngokevin/"><i class="fa fa-github-alt" aria-hidden="true"></i></a>
      <a href="https://twitter.com/andgokevin/"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a href="https://instagram.com/andgokevin/"><i class="fa fa-instagram" aria-hidden="true"></i></a>
    </div>

    <script src="https://cdn.jsdelivr.net/blazy/1.8.2/blazy.min.js"></script>
    <script>new Blazy({selector: '.lazyload'});</script>
  </body>
</html>
