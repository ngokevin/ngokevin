<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhml"
      xmlns:fb="http://ogp.me/ns/fb#"
      xml:lang="en" lang="en">

  <head>
    <title>ngokevin | Browserify and Gulp Workflow for React</title>
    <link rel="stylesheet" type="text/css" href="/css/bundle.css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700' rel='stylesheet' type='text/css'>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico?v=5"/>
    <meta name="viewport" content="width=device-width">
    
  <link rel="stylesheet" type="text/css" href="/css/page.css" />
  
  <meta property="og:description" content="The JS world moves quickly. New web tools are adopted faster than new Spidermans (men?) are produced. One second, people are talking about AngularJS, RequireJS, and Grunt. The next, it&#39;s React, Browserify, and Gulp. Who knows, by tomorrow we could have some new shiny things called McRib, Modulus, or Chug. But the new workflows that come along never fail to keep development interesting and never fail to make our lives easier. Kay, it&#39;s time to freshen up. Let us answer: what is so streets-ahead about these new web technologies? To talk about Browserify and Gulp, we&#39;d need to take a look at their siblings. RequireJS is a JS module loader that manages dependencies. Very rough idea would be like having Python imports in JS. Grunt is a JS task runner. A common use is the automation of builds of frontend codebases (i.e., JS minification, bundling, CSS pre-compilation). Very rough idea would be to think of it as a JS Makefile. Let&#39;s explore what the new kids on the block are kicking around. Why React? React is a JS library for building reusuable components. These components do not require you to manually set up linking functions or any data binding. Just call render and it will refresh in the DOM. React even diffs refreshes to the DOM to minimize unnecessary re-rendering for very performant view rendering. Note that React is not a full MVC framework. As such, It makes a nice wine pairing with other frameworks. I won&#39;t fully dive into React code today, but we can get a nice workflow set up specifically for it. Why Browserify? To pull in a third-party dependency in RequireJS, one must venture out into the internet and curl/wget/download/whatever the file into their project. Then they can required. Any updates will have to be refetched manually Repeat this with multiple dependencies for multiple projects, and it becomes a nuisance. Having to optimize RequireJS projects in another step is a rotten cherry on top. Browserify piggybacks npm. Dependencies with Browserify support such as jQuery, Underscore.js, React, or AngularJS can be hosted on npm, specified and listed all in package.json, and Browserify will handle the bundling of these dependencies with your source code into a single file for you! Browserify even creates a dependency tree to figure out which modules need and need not to be included in the bundle. Smart lad. Why Gulp? Gulp consist more of code whereas Grunt are structured more towards configuration. It can be a matter of preference, but Gulp&#39;s focus on chained pipelines and streams make it such that intermediary data or files are not needed when handling things such as minification and pre-compilation. Grunt is well-fleshed with its thousands plugins from the community. However, Gulp is getting there. In the short dip I&#39;ve taken, Gulp had more than all the plugins I needed. Either way, you&#39;ll be well supported. Here&#39;s my project&#39;s gulpfile. It uses reactify to precompile React JSX files into normal JS files which is then pipelined to browserify for bundling with dependencies. It compiles Stylus files to CSS. And everything&#39;s nicely set up to watch directories and rebuild when needed. I&#39;m pretty giddy. var gulp = require(&#39;gulp&#39;); var browserify = require(&#39;browserify&#39;); var del = require(&#39;del&#39;); var reactify = require(&#39;reactify&#39;); var source = require(&#39;vinyl-source-stream&#39;); var stylus = require(&#39;gulp-stylus&#39;); var paths = { css: [&#39;src/css/**/*.styl&#39;], index_js: [&#39;./src/js/index.jsx&#39;], js: [&#39;src/js/*.js&#39;], }; gulp.task(&#39;clean&#39;, function(cb) { del([&#39;build&#39;], cb); }); gulp.task(&#39;css&#39;, [&#39;clean&#39;], function() { return gulp.src(paths.css) .pipe(stylus()) .pipe(gulp.dest(&#39;./src/css&#39;)); }); gulp.task(&#39;js&#39;, [&#39;clean&#39;], function() { // Browserify/bundle the JS. browserify(paths.index_js) .transform(reactify) .bundle() .pipe(source(&#39;bundle.js&#39;)) .pipe(gulp.dest(&#39;./src/&#39;)); }); // Rerun the task when a file changes gulp.task(&#39;watch&#39;, function() { gulp.watch(paths.css, [&#39;css&#39;]); gulp.watch(paths.js, [&#39;js&#39;]); }); // The default task (called when you run `gulp` from cli) gulp.task(&#39;default&#39;, [&#39;watch&#39;, &#39;css&#39;, &#39;js&#39;]); It&#39;s finally nice to get outside. Away from the codebase of work. Into the virtual world. Smell the aromas of fresh technologies. I&#39;ve grown two years younger, and with an extra kick in my step."/>

  </head>

  <body>
    <div id="wrap" class="c">
      <header>
        <div class="logos">
          <h1 id="logo">
            <a href='/'>ngo<strong>kevin</strong></a>
            <span class="social">
              <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
              <a href="http://twitter.com/andgokevin"><i class="fa fa-twitter-square"></i></a>
              <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
              <a type="application/rss+xml" href="/rss"><i class="fa fa-rss-square"></i></a>
            </span>
          </h1>
          <span id="sublogo">virtual reality developer at mozilla</span>
          <ul class="blog-tags">
            
              <li>
                <a href="/blog/tags/code/"
                   >
                  Code</a>
              </li>
            
              <li>
                <a href="/blog/tags/life/"
                   >
                  Life</a>
              </li>
            
              <li>
                <a href="/blog/tags/photography/"
                   >
                  Shoot</a>
              </li>
            
              <li>
                <a href="/blog/tags/poker/"
                   >
                  Poker</a>
              </li>
            
          </ul>
        </div>

        <nav>
          
            <a href="/about/">
              <span>
                About</span>
            </a>
          
            <a href="/">
              <span>
                Write</span>
            </a>
          
            <a href="/photography/">
              <span>
                Shoot</span>
            </a>
          
        </nav>
      </header>

      <div class="main">
        <div class="header-group">
  <div class="blog">
    <h1>Browserify and Gulp Workflow for React</h1>

    <p class="metadata">
      
        Wednesday July 30, 2014
      
    </p>
  </div>

  <div id="top-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
</div>

        <div class="base-image">
          
        </div>

        
  <div class="page c">
    <p>The JS world moves quickly. New web tools are adopted faster than new
Spidermans (men?) are produced. One second, people are talking about AngularJS,
RequireJS, and Grunt. The next, it's React, Browserify, and Gulp. Who knows, by
tomorrow we could have some new shiny things called McRib, Modulus, or Chug.
But the new workflows that come along never fail to keep development
interesting and never fail to make our lives easier. Kay, it's time to freshen
up. Let us answer: what is so streets-ahead about these new web technologies?</p>
<p>To talk about Browserify and Gulp, we'd need to take a look at their siblings.</p>
<ul>
<li>RequireJS is a JS module loader that manages dependencies. Very rough idea
  would be like having Python <code>imports</code> in JS.</li>
<li>Grunt is a JS task runner. A common use is the automation of builds of
  frontend codebases (i.e., JS minification, bundling, CSS pre-compilation).
  Very rough idea would be to think of it as a JS Makefile.</li>
</ul>
<p>Let's explore what the new kids on the block are kicking around.</p>
<h2 id="why-react">Why React?</h2>
<p>React is a JS library for building reusuable components.  These components do
not require you to manually set up linking functions or any data binding. Just
call <code>render</code> and it will refresh in the DOM. React even diffs refreshes to
the DOM to minimize unnecessary re-rendering for very performant view
rendering.</p>
<p>Note that React is not a full MVC framework. As such, It makes a nice wine
pairing with other frameworks. I won't fully dive into React code today, but we
can get a nice workflow set up specifically for it.</p>
<h2 id="why-browserify">Why Browserify?</h2>
<p>To pull in a third-party dependency in RequireJS, one must venture out into the
internet and curl/wget/download/whatever the file into their project. Then they
can <code>require</code>d. Any updates will have to be refetched manually Repeat this
with multiple dependencies for multiple projects, and it becomes a nuisance.
Having to optimize RequireJS projects in another step is a rotten cherry on
top.</p>
<p>Browserify piggybacks <code>npm</code>. Dependencies with Browserify support such as
jQuery, Underscore.js, React, or AngularJS can be hosted on <code>npm</code>,
specified and listed all in <code>package.json</code>, and Browserify will handle the
bundling of these dependencies with your source code into a single file for
you! Browserify even creates a dependency tree to figure out which modules
need and need not to be included in the bundle. Smart lad.</p>
<h2 id="why-gulp">Why Gulp?</h2>
<p>Gulp consist more of code whereas Grunt are structured more towards
configuration. It can be a matter of preference, but Gulp's focus on chained
pipelines and streams make it such that intermediary data or files are not
needed when handling things such as minification and pre-compilation.</p>
<p>Grunt is well-fleshed with its thousands plugins from the community. However,
Gulp is getting there. In the short dip I've taken, Gulp had more than all the
plugins I needed. Either way, you'll be well supported.</p>
<p>Here's my project's gulpfile. It uses <code>reactify</code> to precompile React JSX
files into normal JS files which is then pipelined to <code>browserify</code> for
bundling with dependencies. It compiles Stylus files to CSS. And everything's
nicely set up to watch directories and rebuild when needed. I'm pretty giddy.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">browserify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browserify&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">del</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;del&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">reactify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;reactify&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;vinyl-source-stream&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">stylus</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-stylus&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">paths</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">css</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/css/**/*.styl&#39;</span><span class="p">],</span>
    <span class="nx">index_js</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./src/js/index.jsx&#39;</span><span class="p">],</span>
    <span class="nx">js</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/js/*.js&#39;</span><span class="p">],</span>
<span class="p">};</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;clean&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">del</span><span class="p">([</span><span class="s1">&#39;build&#39;</span><span class="p">],</span> <span class="nx">cb</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;css&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;clean&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">css</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">stylus</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./src/css&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;clean&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Browserify/bundle the JS.</span>
    <span class="nx">browserify</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">index_js</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">reactify</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">bundle</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">source</span><span class="p">(</span><span class="s1">&#39;bundle.js&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;./src/&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// Rerun the task when a file changes</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">css</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;css&#39;</span><span class="p">]);</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">paths</span><span class="p">.</span><span class="nx">js</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;js&#39;</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// The default task (called when you run `gulp` from cli)</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;watch&#39;</span><span class="p">,</span> <span class="s1">&#39;css&#39;</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">]);</span>
</pre></div>


<p>It's finally nice to get outside. Away from the codebase of work. Into the
virtual world. Smell the aromas of fresh technologies. I've grown two years
younger, and with an extra kick in my step.</p>
  </div>

  <p class="end-sect">&sect;</p>
  <div id="bottom-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
   <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'ngokevin'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  <script src="https://cdn.jsdelivr.net/anchorjs/3.0.0/anchor.min.js"></script>
  <script>anchors.add('h2, h3, h4, h5, h6');</script>

      </div>
    </div>

    <div id="footer">
      <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
      <a href="http://twitter.com/ngokevin_"><i class="fa fa-twitter-square"></i></a>
      <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
      <a type="application/rss+xml" href="/rss/index.xml"><i class="fa fa-rss-square"></i></a>
    </div>

     <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29871909-1']);
  _gaq.push(['_trackPageview']);

  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>