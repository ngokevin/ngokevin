<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhml"
      xmlns:fb="http://ogp.me/ns/fb#"
      xml:lang="en" lang="en">

  <head>
    <title>ngokevin | ng-okevin's Angular ch.5 - Forms</title>
    <link rel="stylesheet" type="text/css" href="/css/bundle.css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700' rel='stylesheet' type='text/css'>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico?v=5"/>
    <meta name="viewport" content="width=device-width">
    
  <link rel="stylesheet" type="text/css" href="/css/page.css" />
  
    <meta property="og:image" content="http://i.imgur.com/FaQEtTM.jpg"/>
  
  <meta property="og:description" content="The form, input, select, and textarea elements are augmented (as directives) in Angular for added sauce. Angular forms have a built-in awareness of their state, such as whether data has been inputted or whether the forms are valid. Angular forms provide two-way data binding with the model. form state. We have covered the two-way data binding in ch.1 AngularJS. Form state, however, can be used to conditionally enable or disable form controls (e.g. buttons). style the form. With directives though, we can also achieve custom form validation. custom form controls. Form State A bit about the backend. Angular forms and inputs are instances of FormController. As instances of FormController, form and input directives contain a handful of useful properties that represent form state. $pristine: True if the user has not yet interacted with the form $dirty: opposite of $pristine $valid: True if all of containing forms and controls are valid $invalid: opposite of $valid $error: a JS object referencing invalid forms or a mapping of error names to booleans $error is a bit confusing as it has two faces. If getting the $error attribute from a form&#39;s FormController, it will be a reference to invalid form controls. {&#34;required&#34;: [{}], &#34;max&#34;: false} Else if getting the $error attribute from an input&#39;s FormController, it will be a mapping of error names to booleans (with &#34;true&#34; indicating an error). {&#34;required&#34;: false, &#34;max&#34;: true} To reference all these properties though, the form and input directives need to be given a name attribute to register it into scope. We can then use these properties to drive form interaction and behavior. Example In Muffin Button, we will create a button that dispenses a number of muffins to demonstrate form states. &lt;form name=&#34;muffinForm&#34; ng-submit=&#34;muffins = muffinNum&#34;&gt; &lt;input id=&#34;muffinNum&#34; type=&#34;number&#34; name=&#34;muffinNumInput&#34; ng-model=&#34;muffinNum&#34; min=&#34;1&#34; max=&#34;255&#34;&gt; &lt;button ng-disabled=&#34;muffinForm.muffinNumInput.$invalid&#34;&gt; Dispense Muffins &lt;/button&gt; &lt;span ng-show=&#34;muffinForm.muffinNumInput.$error.max&#34;&gt; Muffin Overload! &lt;/span&gt; &lt;img src=&#34;muffin.png&#34; ng-repeat=&#34;i in [] | range: muffins&#34;&gt; &lt;/form&gt; Muffin Button contains a number input field. Given a number, it dispenses or displays a respective number of muffins when pressing the muffin button. We use form states to disable the muffin button on invalid and non-number inputs, and we also use it to display a specific error message in the case that too many muffins are requested. We disabled the button with the ng-disabled directive when our HTML5 number input field is invalid. We give the input field the name muffinNumInput. That name can then be referenced from the muffinForm object in the scope as muffinForm.muffinNumInput. Our number field dictates whether the form is invalid. If the input is not a number, is under the min, or over the max, muffinForm.muffinNumInput.$invalid will be switched on. However, $invalid is general catch-all flag. If we want make use of more detailed form states, we can make use of the $error attribute to see specific error flags. In the example, we display an error message with the ng-show directive when the number input field contains too large of a number. In that case, the max flag will be set and can be referenced by muffinForm.muffinNumInput.$error.max. Styling the Form Based on Form State We can style elements differently based on form states. It is nothing new, we simply use form states in conjunction with ng-class. With that, we can give the number input element a red error border when the input is invalid and green when valid. As a side thriller, we use $pristine to not apply these classes when the form has not been touched. The border color would then initially default to gray. &lt;input id=&#34;muffinNum&#34; type=&#34;number&#34; name=&#34;muffinNumInput&#34; ng-model=&#34;muffinNum&#34; min=&#34;1&#34; max=&#34;255&#34; ng-class=&#34;{&#39;error&#39;: !muffinForm.$pristine &amp;&amp; muffinForm.muffinNumInput.$invalid, &#39;valid&#39;: !muffinForm.$pristine &amp;&amp; !muffinForm.muffinNumInput.$invalid}&#34;&gt; Up Next Scopes, controllers, and templates lay the foundation of the cake. Now we can start decorating with the frostiest part of Angular, Directives, where I demonstrate hands-on how to build a mobile slider."/>

  </head>

  <body>
    <div id="wrap" class="c">
      <header>
        <div class="logos">
          <h1 id="logo">
            <a href='/'>ngo<strong>kevin</strong></a>
            <span class="social">
              <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
              <a href="http://twitter.com/andgokevin"><i class="fa fa-twitter-square"></i></a>
              <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
              <a type="application/rss+xml" href="/rss"><i class="fa fa-rss-square"></i></a>
            </span>
          </h1>
          <span id="sublogo">virtual reality developer at mozilla</span>
          <ul class="blog-tags">
            
              <li>
                <a href="/blog/tags/code/"
                   >
                  Code</a>
              </li>
            
              <li>
                <a href="/blog/tags/life/"
                   >
                  Life</a>
              </li>
            
              <li>
                <a href="/blog/tags/photography/"
                   >
                  Shoot</a>
              </li>
            
              <li>
                <a href="/blog/tags/poker/"
                   >
                  Poker</a>
              </li>
            
          </ul>
        </div>

        <nav>
          
            <a href="/about/">
              <span>
                About</span>
            </a>
          
            <a href="/">
              <span>
                Write</span>
            </a>
          
            <a href="/photography/">
              <span>
                Shoot</span>
            </a>
          
        </nav>
      </header>

      <div class="main">
        <div class="header-group">
  <div class="blog">
    <h1>ng-okevin's Angular ch.5 - Forms</h1>

    <p class="metadata">
      
        Thursday April 03, 2014
      
    </p>
  </div>

  <div id="top-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
</div>

        <div class="base-image">
          
            <div class="page_pic ">
              <img class="captioned" src="http://i.imgur.com/FaQEtTM.jpg">
              <div class="page-caption"><span>Validation is the foundation of a form.</span></div>
            </div>
          
        </div>

        
  <div class="page c">
    <p>The form, input, select, and textarea elements are augmented (as directives) in
Angular for added sauce. Angular forms have a built-in awareness of their
state, such as whether data has been inputted or whether the forms are valid.
Angular forms provide</p>
<ul>
<li>two-way data binding with the model.</li>
<li>form state.</li>
</ul>
<p>We have covered the two-way data binding in <a href="/blog/angular-1">ch.1 AngularJS</a>.
Form state, however, can be used to conditionally</p>
<ul>
<li>enable or disable form controls (e.g. buttons).</li>
<li>style the form.</li>
</ul>
<p>With directives though, we can also achieve</p>
<ul>
<li>custom form validation.</li>
<li>custom form controls.</li>
</ul>
<h2 id="form-state">Form State</h2>
<p>A bit about the backend. Angular forms and inputs are instances of
<code>FormController</code>. As instances of <code>FormController</code>, form and input
directives contain a handful of useful properties that represent form state.</p>
<ul>
<li><code>$pristine</code>: True if the user has not yet interacted with the form</li>
<li><code>$dirty</code>: opposite of <code>$pristine</code></li>
<li><code>$valid</code>: True if all of containing forms and controls are valid</li>
<li><code>$invalid</code>: opposite of <code>$valid</code></li>
<li><code>$error</code>: a JS object referencing invalid forms or a mapping of error
  names to booleans</li>
</ul>
<p><code>$error</code> is a bit confusing as it has two faces. If getting the <code>$error</code>
attribute from a <em>form's</em> <code>FormController</code>, it will be a reference to invalid
form controls.</p>
<div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[{}],</span> <span class="s2">&quot;max&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
</pre></div>


<p>Else if getting the <code>$error</code> attribute from an <em>input's</em>
<code>FormController</code>, it will be a mapping of error names to booleans (with
"true" indicating an error).</p>
<div class="highlight"><pre><span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
</pre></div>


<p>To reference all these properties though, the form and input directives need to
be given a <code>name</code> attribute to register it into scope. We can then use
these properties to drive form interaction and behavior.</p>
<h3 id="example">Example</h3>
<p>In <em>Muffin Button</em>, we will create a button that dispenses a number of muffins
to demonstrate form states.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">form</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;muffinForm&quot;</span> <span class="na">ng-submit</span><span class="o">=</span><span class="s">&quot;muffins = muffinNum&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;muffinNum&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;muffinNumInput&quot;</span>
         <span class="na">ng-model</span><span class="o">=</span><span class="s">&quot;muffinNum&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;255&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">ng-disabled</span><span class="o">=</span><span class="s">&quot;muffinForm.muffinNumInput.$invalid&quot;</span><span class="p">&gt;</span>
    Dispense Muffins
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">ng-show</span><span class="o">=</span><span class="s">&quot;muffinForm.muffinNumInput.$error.max&quot;</span><span class="p">&gt;</span>
    Muffin Overload!
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;muffin.png&quot;</span> <span class="na">ng-repeat</span><span class="o">=</span><span class="s">&quot;i in [] | range: muffins&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>


<p><em>Muffin Button</em> contains a number input field. Given a number, it dispenses or
displays a respective number of muffins when pressing the muffin button. We use
form states to disable the muffin button on invalid and non-number inputs, and
we also use it to display a specific error message in the case that too many
muffins are requested.</p>
<p>We disabled the button with the <code>ng-disabled</code> directive when our
HTML5 number input field is invalid. We give the input field the name
<code>muffinNumInput</code>. That name can then be referenced from the
<code>muffinForm</code> object in the scope as <code>muffinForm.muffinNumInput</code>. Our
number field dictates whether the form is invalid. If the input is not a
number, is under the min, or over the max,
<code>muffinForm.muffinNumInput.$invalid</code> will be switched on.</p>
<p>However, <code>$invalid</code> is general catch-all flag. If we want make use of more
detailed form states, we can make use of the <code>$error</code> attribute to see
specific error flags. In the example, we display an error message with the
<code>ng-show</code> directive when the number input field contains too large of a
number. In that case, the <code>max</code> flag will be set and can be referenced by
<code>muffinForm.muffinNumInput.$error.max</code>.</p>
<iframe src="/files/ng-book/examples/muffinbutton/index.html"></iframe>

<h3 id="styling-the-form-based-on-form-state">Styling the Form Based on Form State</h3>
<p>We can style elements differently based on form states. It is nothing new, we
simply use form states in conjunction with <code>ng-class</code>. With that, we can
give the number input element a red error border when the input is invalid and
green when valid.</p>
<p>As a side thriller, we use <code>$pristine</code> to not apply these classes when the
form has not been touched. The border color would then initially default to
gray.</p>
<div class="highlight"><pre><span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;muffinNum&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;muffinNumInput&quot;</span>
       <span class="na">ng-model</span><span class="o">=</span><span class="s">&quot;muffinNum&quot;</span> <span class="na">min</span><span class="o">=</span><span class="s">&quot;1&quot;</span> <span class="na">max</span><span class="o">=</span><span class="s">&quot;255&quot;</span>
       <span class="na">ng-class</span><span class="o">=</span><span class="s">&quot;{&#39;error&#39;: !muffinForm.$pristine &amp;&amp; muffinForm.muffinNumInput.$invalid,</span>
<span class="s">                  &#39;valid&#39;: !muffinForm.$pristine &amp;&amp; !muffinForm.muffinNumInput.$invalid}&quot;</span><span class="p">&gt;</span>
</pre></div>


<h2 id="up-next">Up Next</h2>
<p>Scopes, controllers, and templates lay the foundation of the cake. Now we can
start decorating with the frostiest part of Angular,
<a href="/blog/angularslider">Directives</a>, where I demonstrate hands-on how to build a
mobile slider.</p>
  </div>

  <p class="end-sect">&sect;</p>
  <div id="bottom-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
   <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'ngokevin'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  <script src="https://cdn.jsdelivr.net/anchorjs/3.0.0/anchor.min.js"></script>
  <script>anchors.add('h2, h3, h4, h5, h6');</script>

      </div>
    </div>

    <div id="footer">
      <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
      <a href="http://twitter.com/ngokevin_"><i class="fa fa-twitter-square"></i></a>
      <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
      <a type="application/rss+xml" href="/rss/index.xml"><i class="fa fa-rss-square"></i></a>
    </div>

     <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29871909-1']);
  _gaq.push(['_trackPageview']);

  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>