<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhml"
      xmlns:fb="http://ogp.me/ns/fb#"
      xml:lang="en" lang="en">

  <head>
    <title>ngokevin | Beets - CLI Media Library Management for OCD Geeks</title>
    <link rel="stylesheet" type="text/css" href="/css/bundle.css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700' rel='stylesheet' type='text/css'>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico?v=5"/>
    <meta name="viewport" content="width=device-width">
    
  <link rel="stylesheet" type="text/css" href="/css/page.css" />
  
    <meta property="og:image" content="http://beets.radbox.org/beets.png"/>
  
  <meta property="og:description" content="Ever since my very first iPod back in high school, I had been glued to heavy media library manangement systems such as iTunes or Banshee. They let me import music to a consolidated library folder, edit ID3 tags and update the file, and fetch album art. However, managing it through a GUI very quickly became tedious. My bot that fetched music from /r/listentothis was grabbing anywhere from 20 to 30 songs a day on a cron. Since they were being fetched from YouTube via youtube-dl, the songs were untagged. After a while, the songs build up, and I get hundreds or even thousands of songs that are left sitting in my library untagged. I only wanted to tag songs that I liked which entailed sifting through them. Ideally, I would want to be able to listen to my music library from anywhere (e.g. work) and slowly tag or delete songs remotely. Depending on managing my music on my desktop with Banshee was difficult: My desktop is usually off so I can&#39;t remote into it to actually manage my library. Banshee is difficult to use remotely because it is very resource-intensive It being a GUI made it not very efficient actions-per-minute wise I depended too much on Banshee, and needed a command-line alternative. Then it happened. I visited a wise elder during my travels along the roads of the Internet, and he showed me the ancient ways of manging my music from afar. Behold, beets, &#34;the media library management system for obsessive-compulsive music geeks. The purpose of beets is to get your music collection right once and for all. It catalogs your collection, automatically improving its metadata as it goes using the MusicBrainz database. (It also downloads cover art for albums it imports.) Then it provides a bouquet of tools for manipulating and accessing your music.&#34; Setup You can install beets through pip sudo pip install beets Create a beets config file in your home directory vim ~/.beetsconfig This contains all the configurations you will need for deciding how you want your library to be managed. Here is mine: [beets] directory: ~/Music library: ~/Music/musiclibrary.blb import_copy: yes import_write: yes import_resume: yes import_art: yes import_log: ~/.beets.log colors: yes plugins: bpd lastid [paths] default: $albumartist/$albumartist - $title compilation: $albumartist/$albumartist - $title [bpd] host: 127.0.0.1 port: 8080 password: a This is just a basic configuration file, and the beets site has pretty good documentation on setting it up. Note that there is a difference between your music directory and your music database/library. Throwing a file into the directory does not throw it into your music database/library. You must import files (more on that later) for it to actually be registered in the blob file. Otherwise, it won&#39;t show up in queries and such. import_copy means to physically copy imported media into the library directory (it is enabled by default). The BPD plugin allows playing the media and the lastid allows tagging via acoustic fingerprinting which means it actually analyzes songs themeselves to try to determine correct metadata (more on the autotagger later). Importing Library You can import your library with your library&#39;s existing metadata, or try out the autotagger. The autotagger pits the current metadata (or even uses acoustic fingerprinting if the plugin is enabled) against an online music database to try to determine canonical metadata. Using the autotagger is a long, tedious, and interactive process that will make you quite acquainted with your library. To import using existing tags, use the -A option. This is the option I used, and worked very well. Consider setting import-write to no for the initial import since there is no need to re-copy the files onto themselves. $ beet import -A /my/huge/mp3/library To import using the autotagger, simply use import. $ beet import /path/to/my/music You can interrupt an import process and resume it later. If you want to cancel a session, just throw the -P option. If you get a weird database lock, just try again. It was most likely due to threads colliding. Importing Songs If you grab more songs, the process is similar. You can run import and it will copy it into your music directory if import-write is enabled. What&#39;s nice is it will try to fetch album art for you. $ beet import ~/some_great_album If you want to copy from a folder that contains already-imported music, you can import incrementally with the -i option to only import new songs. beet import -i Querying Music You can run queries on your database. You can run flat queries or field-specific queries. Beets has special syntax for queries (field:value for querying, field=value for setting). $ beet ls the magnetic fields $ beet list artist:dream You can also get overall library statistics. $ beet stats Modifying Tags You can again use queries to modify metadata. beet modify [-MWay] QUERY FIELD=VALUE This will change the field to value for every song that matches the query. If you change metadata of songs using another method or delete songs without deleting it from the database, you can update the database to reflect these changes with update. beet update -a lot more where that came from- Official Documentation: http://readthedocs.org/docs/beets/en/1.0b11/index.html Subsonic A very nice complement to a library management system is a streaming player via web frontend. I used to use GNUmp3d which allowed me to stream music and video, but Subsonic, a free web-based media streamer has many really cool features including editing tags, multiple users that can see what each other is listening to, permissions for different users, and ability to download and upload music all via the frontend. I am currently hosting on on my webserver. With the one-two punch of Beets and Subsonic, managing music has never been easier."/>

  </head>

  <body>
    <div id="wrap" class="c">
      <header>
        <div class="logos">
          <h1 id="logo">
            <a href='/'>ngo<strong>kevin</strong></a>
            <span class="social">
              <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
              <a href="http://twitter.com/andgokevin"><i class="fa fa-twitter-square"></i></a>
              <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
              <a type="application/rss+xml" href="/rss"><i class="fa fa-rss-square"></i></a>
            </span>
          </h1>
          <span id="sublogo">virtual reality developer at mozilla</span>
          <ul class="blog-tags">
            
              <li>
                <a href="/blog/tags/code/"
                   >
                  Code</a>
              </li>
            
              <li>
                <a href="/blog/tags/life/"
                   >
                  Life</a>
              </li>
            
              <li>
                <a href="/blog/tags/photography/"
                   >
                  Shoot</a>
              </li>
            
              <li>
                <a href="/blog/tags/poker/"
                   >
                  Poker</a>
              </li>
            
          </ul>
        </div>

        <nav>
          
            <a href="/about/">
              <span>
                About</span>
            </a>
          
            <a href="/">
              <span>
                Write</span>
            </a>
          
            <a href="/photography/">
              <span>
                Shoot</span>
            </a>
          
        </nav>
      </header>

      <div class="main">
        <div class="header-group">
  <div class="blog">
    <h1>Beets - CLI Media Library Management for OCD Geeks</h1>

    <p class="metadata">
      
        Tuesday December 20, 2011
      
    </p>
  </div>

  <div id="top-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
</div>

        <div class="base-image">
          
            <div class="page_pic right">
              <img src="http://beets.radbox.org/beets.png">
              
            </div>
          
        </div>

        
  <div class="page c">
    <p>Ever since my very first iPod back in high school, I had been glued to heavy
media library manangement systems such as iTunes or Banshee. They let me import
music to a consolidated library folder, edit ID3 tags and update the file, and
fetch album art. However, managing it through a GUI very quickly became
tedious.</p>
<p>My <a href="http://github.com/ngokevin/mp3-Suite">bot</a> that fetched music from
<a href="reddit.com/r/listentothis">/r/listentothis</a> was grabbing anywhere from 20 to
30 songs a day on a cron. Since they were being fetched from YouTube via
youtube-dl, the songs were untagged. After a while, the songs build up, and I
get hundreds or even thousands of songs that are left sitting in my library
untagged. I only wanted to tag songs that I liked which entailed sifting
through them. Ideally, I would want to be able to listen to my music
library from anywhere (e.g. work) and slowly tag or delete songs remotely.</p>
<p>Depending on managing my music on my desktop with Banshee was difficult:</p>
<ul>
<li>My desktop is usually off so I can't remote into it to actually manage my library.</li>
<li>Banshee is difficult to use remotely because it is very resource-intensive</li>
<li>It being a GUI made it not very efficient actions-per-minute wise</li>
</ul>
<p>I depended too much on Banshee, and needed a command-line alternative.  Then it
happened. I visited a wise elder during my travels along the roads of the
Internet, and he showed me the ancient ways of manging my music from afar.
Behold, <a href="http://beets.radbox.org">beets</a>, <em>"the media library management system
for obsessive-compulsive music geeks.  The purpose of beets is to get your
music collection right once and for all. It catalogs your collection,
automatically improving its metadata as it goes using the MusicBrainz database.
(It also downloads cover art for albums it imports.) Then it provides a bouquet
of tools for manipulating and accessing your music."</em>
<br/>
<br/></p>
<p><strong>Setup</strong></p>
<p>You can install beets through pip</p>
<div class="highlight"><pre>sudo pip install beets
</pre></div>


<p>Create a beets config file in your home directory</p>
<div class="highlight"><pre>vim ~/.beetsconfig
</pre></div>


<p>This contains all the configurations you will need for deciding how you want
your library to be managed. Here is mine:</p>
<div class="highlight"><pre><span class="k">[beets]</span>
<span class="err">directory:</span> <span class="err">~/Music</span>
<span class="err">library:</span> <span class="err">~/Music/musiclibrary.blb</span>
<span class="err">import_copy:</span> <span class="err">yes</span>
<span class="err">import_write:</span> <span class="err">yes</span>
<span class="err">import_resume:</span> <span class="err">yes</span>
<span class="err">import_art:</span> <span class="err">yes</span>
<span class="err">import_log:</span> <span class="err">~/.beets.log</span>
<span class="err">colors:</span> <span class="err">yes</span>
<span class="err">plugins:</span> <span class="err">bpd</span> <span class="err">lastid</span>

<span class="k">[paths]</span>
<span class="err">default:</span> <span class="err">$albumartist/$albumartist</span> <span class="err">-</span> <span class="err">$title</span>
<span class="err">compilation:</span> <span class="err">$albumartist/$albumartist</span> <span class="err">-</span> <span class="err">$title</span>

<span class="k">[bpd]</span>
<span class="err">host:</span> <span class="err">127.0.0.1</span>
<span class="err">port:</span> <span class="err">8080</span>
<span class="err">password:</span> <span class="err">a</span>
</pre></div>


<p>This is just a basic configuration file, and the beets site has pretty good
<a href="http://readthedocs.org/docs/beets/en/1.0b11/reference/config.html">documentation</a>
on setting it up. Note that there is a difference between your music directory
and your music database/library. Throwing a file into the directory does not
throw it into your music database/library. You must import files (more on that
later) for it to actually be registered in the blob file. Otherwise, it won't show
up in queries and such.</p>
<p><em>import_copy</em> means to physically copy imported media into the library
directory (it is enabled by default). The BPD plugin allows playing the media
and the <em>lastid</em> allows tagging via acoustic fingerprinting which means it
actually analyzes songs themeselves to try to determine correct metadata (more
on the autotagger later).
<br/>
<br/></p>
<p><strong>Importing Library</strong></p>
<p>You can import your library with your library's existing metadata, or try out
the autotagger.  The autotagger pits the current metadata (or even uses
acoustic fingerprinting if the plugin is enabled) against an online music
database to try to determine canonical metadata. Using the autotagger is a long,
tedious, and interactive process that will make you quite acquainted with your
library.</p>
<p>To import using existing tags, use the -A option. This is the option I used, and
worked very well. Consider setting import-write to no for the initial import
since there is no need to re-copy the files onto themselves.</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">beet</span> <span class="kn">import</span> <span class="o">-</span><span class="n">A</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">huge</span><span class="o">/</span><span class="n">mp3</span><span class="o">/</span><span class="n">library</span>
</pre></div>


<p>To import using the autotagger, simply use import.</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">beet</span> <span class="kn">import</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">music</span>
</pre></div>


<p>You can interrupt an import process and resume it later. If you want to cancel
a session, just throw the -P option. If you get a weird database lock, just try again.
It was most likely due to threads colliding.
<br/>
<br/></p>
<p><strong>Importing Songs</strong></p>
<p>If you grab more songs, the process is similar. You can run import and it will copy
it into your music directory if import-write is enabled. What's nice is it will try
to fetch album art for you.</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">beet</span> <span class="kn">import</span> <span class="o">~/</span><span class="n">some_great_album</span>
</pre></div>


<p>If you want to copy from a folder that contains already-imported music, you can
import incrementally with the -i option to only import new songs.</p>
<div class="highlight"><pre><span class="n">beet</span> <span class="kn">import</span> <span class="o">-</span><span class="n">i</span>
</pre></div>


<p><br/></p>
<p><strong>Querying Music</strong></p>
<p>You can run <a href="http://readthedocs.org/docs/beets/en/1.0b11/reference/query.html">queries</a>
on your database. You can run flat queries or field-specific queries. Beets has special syntax
for queries (field:value for querying, field=value for setting).</p>
<div class="highlight"><pre>$ beet ls the magnetic fields
$ beet list artist:dream
</pre></div>


<p>You can also get overall library statistics.</p>
<div class="highlight"><pre>$ beet stats
</pre></div>


<p><br/>
<strong>Modifying Tags</strong></p>
<p>You can again use queries to modify metadata.</p>
<div class="highlight"><pre>beet modify [-MWay] QUERY FIELD=VALUE
</pre></div>


<p>This will change the field to value for every song that matches the query.</p>
<p>If you change metadata of songs using another method or delete songs without deleting it from the database, you can update the database to reflect these changes with update.</p>
<div class="highlight"><pre>beet update
</pre></div>


<p>-a lot more where that came from-
Official Documentation:
http://readthedocs.org/docs/beets/en/1.0b11/index.html
<br/>
<br/></p>
<p><strong>Subsonic</strong></p>
<p>A very nice complement to a library management system is a streaming player via
web frontend. I used to use <a href="http://www.gnu.org/software/gnump3d/">GNUmp3d</a>
which allowed me to stream music and video, but
<a href="http://subsonic.org">Subsonic</a>, a free web-based media streamer has many
really cool features including editing tags, multiple users that can see what
each other is listening to, permissions for different users, and ability to
download and upload music all via the frontend. I am currently hosting on on my
webserver.</p>
<p>With the one-two punch of Beets and Subsonic, managing music has never been easier.</p>
  </div>

  <p class="end-sect">&sect;</p>
  <div id="bottom-share" class="addthis_toolbox addthis_default_style">
  <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  <a class="addthis_button_tweet"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-513af3cd5e69b4ae"></script>
   <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'ngokevin'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  <script src="https://cdn.jsdelivr.net/anchorjs/3.0.0/anchor.min.js"></script>
  <script>anchors.add('h2, h3, h4, h5, h6');</script>

      </div>
    </div>

    <div id="footer">
      <a href="mailto:me@ngokevin.com"><i class="fa fa-envelope"></i></a>
      <a href="http://twitter.com/ngokevin_"><i class="fa fa-twitter-square"></i></a>
      <a href="http://github.com/ngokevin"><i class="fa fa-github-square"></i></a>
      <a type="application/rss+xml" href="/rss/index.xml"><i class="fa fa-rss-square"></i></a>
    </div>

     <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29871909-1']);
  _gaq.push(['_trackPageview']);

  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>